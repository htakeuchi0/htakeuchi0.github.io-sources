---
title: "レイアウト"
weight: 2
# bookFlatSection: false
# bookToc: true
# bookHidden: false
# bookCollapseSection: false
# bookComments: false
# bookSearchExclude: false
---

# レイアウト

## 概要

本ページではレイアウト（線路配線）の数学的表現を考えます．

## レイアウトの数学的表現

一般に，プラレールの配線結果を **レイアウト** と呼びますので，本ページでもそれにならいます．

レイアウトを考える場合，レール同士は斜めに接続できず，接続部が凹凸の組み合わせである必要があります．ここでは，特に配線結果が環状であることを要求しないこととします．

レイアウトは，基本的にはレールを頂点としたグラフで接続を表現することを考えます．接続が決まると形状が決まりますが，これは各レールの端点や分岐点を頂点とする単純グラフで表現できます．以下，接続を表すグラフを **接続グラフ**，形状を表すグラフを **形状グラフ** とよぶことにします．
これらをふまえて，レイアウトの形式的定義を以下のようにまとめます．

{{< hint info >}}
{{< theorem-label name="Definition" >}} 
1. \\(\mathcal{G}_{m,n}\\) を \\(\\{1,2,\dots,m\\}\\) から \\(\\{(i,j)\mid i,j\in\\{1,2,\dots,n\\},i\not=j\\}\\) への写像全体の集合とする．
2. \\(\Gamma_m\\) を \\(\\{1,2,\dots,m\\}\\) から \\(\mathbb{Z}^2\\) への写像全体の集合とする．
3. \\(\mathcal{A}\\) を，以下を満たす \\(R\\) 全体の集合とし，\\(\mathcal{A}\\) の元 \\(R\\) を **レイアウト** という．
    * \\(R=(r,g,c)\in\bigcup_{n,m}(\mathcal{R}^n\times\mathcal{G}_{m,n}\times\Gamma_m)\\)
    * \\(k=1,2,\dots,m\\) について，\\(g(k)=(i^{(1)},i^{(2)})\\), \\(c(k)=(j^{(1)},j^{(2)})\\) のとき，
          \\[
              \begin{aligned}
                &r_{i^{(1)}}=(\phi_1^{i^{(1)}},\dots,\phi_{n_{i^{(1)}}}^{i^{(1)}},t_1^{i^{(1)}},\dots,t_{m_{i^{(1)}}}^{i^{(1)}},\psi^{i^{(1)}},u_1^{i^{(1)}},\dots,u_{n-1}^{i^{(1)}}),\\\\
                &r_{i^{(2)}}=(\phi_1^{i^{(2)}},\dots,\phi_{n_{i^{(2)}}}^{i^{(2)}},t_1^{i^{(2)}},\dots,t_{m_{i^{(2)}}}^{i^{(2)}},\psi^{i^{(2)}},u_1^{i^{(2)}},\dots,u_{n-1}^{i^{(2)}})\\\\
              \end{aligned}
          \\]
      において，
        * \\(t_{j^{(1)}}^{i^{(1)}}\not=t_{j^{(2)}}^{i^{(2)}},\quad t_{j^{(1)}}^{i^{(1)}}\not=\bot,\quad t_{j^{(2)}}^{i^{(2)}}\not=\bot\\) である．
        * \\(\psi^{i^{(1)}}(i,j)=j^{(1)}\\), \\(\psi^{i^{(2)}}(i',j')=j^{(2)}\\) において，
	\\[ \lim\_{x\to j}\frac{{\phi\'}\_i^{i^{(1)}}}{\\|{\phi\'}\_i^{i^{(1)}}\\|\_2}=\lim_{x\to j\'}\frac{{\phi\'}_{i\'}^{i^{(1)}}}{\\|{\phi\'}\_{i\'}^{i^{(1)}}\\|\_2} \\]
	が成り立つ．
{{< katex >}}{{< /katex >}}
{{< /hint >}}

